#
# JBZoo Toolbox - CI-Report-Converter
#
# This file is part of the JBZoo Toolbox project.
# For the full copyright and license information, please view the LICENSE
# file that was distributed with this source code.
#
# @package    CI-Report-Converter
# @license    MIT
# @copyright  Copyright (C) JBZoo.com, All rights reserved.
# @link       https://github.com/JBZoo/CI-Report-Converter
#

language: php
os: linux
dist: xenial

git:
  depth: false

php:
  - 7.2
  - 7.3
  - 7.4
  - 8.0
  - nightly

jobs:
  fast_finish: true
  allow_failures:
    - php: 8.0
    - php: nightly

before_script:
  - composer self-update

script:
  - make build    --no-print-directory
  - make test-all --no-print-directory

after_script:
  - make report-coveralls

deploy:
  provider: releases
  token:
    secure: Wz6EYFrFIw7UC6OACiucwHg6xlN9MVzUw7BbsvP7iduVMoe1fUREdoWAlNttSLzxDrvEqlXnCxUIVgo3PCB0ZVjWjjaf7PNUzwLMcYPQeFkXL1GTZ3SwoB+f98ICNFAxe1FpwqCECrDVziKq+a7rymVX5k4gzbxlTIdWqwW7HJi/JqPJA23V/SkhAZcRsCLe9axnn3A0tR3ogiNw76rUiPdYR81EYwPfdU+Q0FvKa0Q/vfbXM7rnvdGBv5m/XFwPKXkmPT30cSSzrefsdgzmwkYEqqQn2r4uMnTDevUD5xhn88vqsgnQuA9KJQNPrBdL/kCqZ+ucSB1zhZyE7jiE46I5i+xQp6e7vfTWpwmsOKcJE5tQjDRNPRVUzTWaGj2MzhKemr+QKY/Ah2ApixzXP4SAg+rvz849H1E1/vVDMqYQ6mnXKGsDCU+9wwzPAceGCGulv2Efz0USTztKykSFHGQQT5EVogo5mM5diMM6/OyISIYuethUfXZCi0YTGNd/ag4UWBvg6NP1Psj0t9HDlJjCPQKwJnJEG5FPfuU4gOjQlt4FWtGL2Bk7/P+xHJSZ6cAo1pDj9GAgvhyQaRJhRXJAy3t7PzpwMVufIJ//qi89+rMIH67dO6RJYXeM9Vrz2FPlMZtJmBb8b9v5e3YwT4Q3Ac+Ln0PVhmerTp2FZI8=
  file: "./build/ci-report-converter.phar"
  skip_cleanup: true
  on:
    tags: true
    branch: master
    php: 7.2
